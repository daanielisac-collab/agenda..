<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bloco de Notas - Agenda Interativa</title>
<style>
  body {font-family: Arial, sans-serif; background: #f0f4f8; margin:0; padding:0; display:flex; justify-content:center; align-items:flex-start; min-height:100vh;}
  .container {max-width: 900px; width:100%; margin: 20px; background:#ffffff; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,0.1); padding:20px; position:relative;}
  h1{text-align:center; color:#333; margin-bottom:20px;}
  .calendar {display:grid; grid-template-columns: repeat(7, 1fr); gap:5px;}
  .day {background:#e0e7ff; padding:10px; border-radius:8px; text-align:center; cursor:pointer; position:relative; transition: transform 0.2s, background 0.2s;}
  .day:hover {transform: scale(1.05);}
  .day-number {font-weight:700; margin-bottom:5px;}
  .note {margin-top:5px; font-size:13px; color:#111; min-height:20px; background:#f9fafb; padding:5px; border-radius:5px; border:1px solid #ccc; text-align:left;}
  .note:focus {outline:none; border-color:#7c3aed; background:#f3e8ff;}
  .month-controls {display:flex; justify-content:space-between; margin-bottom:10px;}
  .btn {padding:6px 12px; background:#7c3aed; color:white; border:none; border-radius:6px; cursor:pointer;}
  .btn:hover {background:#5b21b6;}
  .notification {position:fixed; bottom:20px; right:20px; background:#22c55e; color:white; padding:10px 20px; border-radius:8px; box-shadow:0 4px 15px rgba(0,0,0,0.2); opacity:0; transform:translateY(20px); transition: opacity 0.4s, transform 0.4s;}
  .notification.show {opacity:1; transform:translateY(0);}
  .holiday {background:#3b82f6; color:white;} /* Dias de feriado */
</style>
</head>
<body>
<div class="container">
  <h1>Bloco de Notas - Agenda Interativa</h1>
  <div class="month-controls">
    <button class="btn" id="prevMonth">◀ Mês Anterior</button>
    <div id="monthLabel" style="font-weight:700; font-size:16px;"></div>
    <button class="btn" id="nextMonth">Mês Seguinte ▶</button>
  </div>
  <div class="calendar" id="calendar"></div>
</div>
<div class="notification" id="notification">✅ Notas salvas com sucesso!</div>

<script>
const calendarEl = document.getElementById('calendar');
const monthLabel = document.getElementById('monthLabel');
const prevMonthBtn = document.getElementById('prevMonth');
const nextMonthBtn = document.getElementById('nextMonth');
const notification = document.getElementById('notification');

let today = new Date();
let notes = JSON.parse(localStorage.getItem('agendaNotes')||'{}');

// Lista de feriados (ano, mês 0-11, dia)
const holidays = [
  new Date(2025, 0, 1), // 1 de janeiro
  new Date(2025, 3, 21), // 21 de abril
  new Date(2025, 11, 25) // 25 de dezembro
];

function getKey(date){ return `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`; }

function isHoliday(date){
  return holidays.some(h => h.getFullYear()===date.getFullYear() && h.getMonth()===date.getMonth() && h.getDate()===date.getDate());
}

function renderCalendar(){
  calendarEl.innerHTML='';
  const year = today.getFullYear();
  const month = today.getMonth();
  monthLabel.textContent = today.toLocaleString('pt-BR',{month:'long', year:'numeric'});

  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month+1,0).getDate();

  for(let i=0;i<firstDay;i++){ calendarEl.appendChild(document.createElement('div')); }

  for(let d=1;d<=daysInMonth;d++){
    const dayEl = document.createElement('div');
    dayEl.className='day';
    const date = new Date(year, month, d);
    const key = getKey(date);

    // Marca feriado
    if(isHoliday(date)){
      dayEl.classList.add('holiday');
    }

    const dayNumber = document.createElement('div');
    dayNumber.className='day-number';
    dayNumber.textContent = d;

    const noteEl = document.createElement('div');
    noteEl.className='note';
    noteEl.contentEditable = true;
    noteEl.textContent = notes[key] || '';
    noteEl.addEventListener('input', ()=>{
      notes[key] = noteEl.textContent;
      localStorage.setItem('agendaNotes', JSON.stringify(notes));
      notification.classList.add('show');
      setTimeout(()=>{ notification.classList.remove('show'); }, 3000);
    });

    dayEl.appendChild(dayNumber);
    dayEl.appendChild(noteEl);
    calendarEl.appendChild(dayEl);
  }
}

prevMonthBtn.addEventListener('click', ()=>{ today.setMonth(today.getMonth()-1); renderCalendar(); });
nextMonthBtn.addEventListener('click', ()=>{ today.setMonth(today.getMonth()+1); renderCalendar(); });

renderCalendar();
</script>
</body>
</html>
